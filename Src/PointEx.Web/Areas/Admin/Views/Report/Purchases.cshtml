@using Framework.Report
@model PointEx.Web.Models.ReportFiltersModel
@{
    ViewBag.Title = "Reporte Compras";
}

<h3>Compras</h3>

<div>
    <a class="btn btn-default download-report" target="_blank" href="@Url.Action("GenerateReportPurchases", Model.GetRouteValues())">
        <img src="@Url.Content("~/Content/images/adobe-acrobat.png")" />
    </a>
    <a class="btn btn-default download-report" href="@Url.Action("GenerateReportPurchases", Model.GetRouteValues(ReportTypeEnum.Word))">
        <img src="@Url.Content("~/Content/images/microsoft-word.png")" />
    </a>
    <a class="btn btn-default download-report" href="@Url.Action("GenerateReportPurchases", Model.GetRouteValues(ReportTypeEnum.Excel))">
        <img src="@Url.Content("~/Content/images/microsoft-excel.png")" />
    </a>

    @Html.FilterButton()

</div>

<div class="spacer">
</div>

<div id="filter-container" class="collapse">
    @using (Html.BeginForm("Purchases", "Report", FormMethod.Get, new { area = "Admin" }))
    {
        <div class="row">
            <div class="col-sm-4">
                @Html.EditorFor(model => model.From)
            </div>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.To)
            </div>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.EducationalInstitutionId)
            </div>
        </div>
        <div class="spacer">
        </div>
        <div class="row">
            <div class="col-sm-4">
                @Html.EditorFor(model => model.ShopId)
            </div>
            <div class="col-sm-4 pull-right">
                <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search"></span></button>
            </div>
        </div>
    }
</div>

<div id="report-container">
    @{
        var reportUrl = Url.Action("GenerateReportPurchases", Model.GetRouteValues());
    }

    @Html.Partial("_ReportLoading")

    <iframe id="report-iframe" onload=" window.parent.hideLoading(); "
            style="width: 100%;margin-top: 10px; display: none"
            src="@reportUrl"></iframe>

</div>